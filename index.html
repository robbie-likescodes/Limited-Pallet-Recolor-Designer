<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
  <title>Palette Mapper â€“ Limited Palette Recolor</title>
  <link rel="stylesheet" href="./css/styles.css" />
</head>
<body>
  <!-- Header -->
  <header>
    <div class="header-left">
      <h1>Palette Mapper</h1>
      <p>Reduce photos to limited colors for printing</p>
    </div>
    <div class="header-right">
      <button id="openProjects" class="ghost" type="button">Projects</button>
    </div>
  </header>

  <!-- 1) Load image -->
  <section class="card">
    <h2>1) Load image</h2>
    <div class="row">
      <input id="fileInput" type="file" accept="image/*" />
      <button id="pasteBtn" type="button">Paste</button>
      <button id="resetBtn" type="button" disabled>Reset</button>
    </div>
    <div class="help">Upload works with Photo Library or Camera on iOS.</div>
    <div class="panel">
      <div class="panel-head">Original</div>
      <canvas id="srcCanvas"></canvas>
      <div class="tiny-help">After an image loads, suggestions and restricted palette become available.</div>
    </div>
  </section>

  <!-- 2) Working palette (auto) -->
  <section class="card">
    <h2>2) Working Palette (auto)</h2>
    <div class="help">This is the palette detected from the image. The Restricted Palette below decides which inks are allowed in the final output.</div>
    <div id="workingList" class="palette-list"></div>
  </section>

  <!-- 3) Restricted Palette -->
  <section class="card" id="restrictedCard">
    <h2>3) Restricted Palette (Final Inks)</h2>
    <div class="row">
      <button id="rpSelectAll" class="ghost" type="button">Select all</button>
      <button id="rpSelectNone" class="ghost" type="button">Select none</button>
      <label class="check"><input id="rpAllowWhite" type="checkbox" checked /> Allow White mixing</label>
    </div>
    <div id="restrictedList" class="restricted-list"></div>
  </section>

  <!-- 4) Texture / Replacement -->
  <section class="card" id="textureCard">
    <h2>4) Texture / Replacement</h2>
    <div class="row">
      <button id="btnSuggestHueLuma" type="button" disabled>Suggest by Hue &amp; Luma</button>
      <label>Pattern
        <select id="texPattern">
          <option value="checker">Checker</option>
          <option value="ordered">Ordered</option>
          <option value="stripe">Stripe</option>
          <option value="dots">Dots</option>
        </select>
      </label>
    </div>
    <div id="replacementRules" class="rules"></div>
  </section>

  <!-- Mapped preview (placeholder section you can integrate with your full pipeline) -->
  <section class="card">
    <h2>Mapped (preview)</h2>
    <canvas id="outCanvas"></canvas>
    <div class="tiny-help">This demo file draws suggestions only; integrate with your full mapping pipeline to render final output here.</div>
  </section>

  <!-- Projects Drawer -->
  <aside id="projectsPane" class="projects" aria-hidden="true">
    <div class="projects-head">
      <h3>Projects</h3>
      <button id="closeProjects" class="ghost" type="button">Close</button>
    </div>
    <div class="projects-actions row">
      <button id="saveProject" type="button">Save</button>
      <button id="refreshProjects" class="ghost" type="button">Refresh</button>
      <button id="exportProject" class="ghost" type="button">Export</button>
      <label class="filelike">Import
        <input id="importProject" type="file" accept="application/json" hidden />
      </label>
      <button id="deleteProject" class="ghost danger" type="button">Delete</button>
    </div>
    <div id="projectsList" class="projects-list"></div>
  </aside>

  <script type="module" src="./js/app.js"></script>
</body>
</html>
