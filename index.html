<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
  <title>Palette Mapper — Limited Palette Recolor</title>

  <!-- CSS lives at /css/styles.css (root) -->
  <link rel="stylesheet" href="./css/styles.css?v=1" />

  <!-- Minimal inline fallback so the page isn't blank if CSS fails -->
  <style>body{background:#0f172a;color:#e5e7eb;font:14px system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}</style>
</head>
<body>
  <!-- Your existing markup; keep IDs the same so JS can find them -->
  <header>
    <div class="header-left">
      <h1>Palette Mapper</h1>
      <p>Reduce photos to limited colors for printing</p>
    </div>
    <div class="header-right">
      <button id="openProjects" class="ghost" type="button">Projects</button>
    </div>
  </header>

  <!-- Main content (same structure you had before) -->
  <main id="app" class="container">
    <!-- Keep your sections/cards/canvases etc. here exactly as before -->
  </main>

  <!-- Boot-status banner: will be hidden if app.js runs -->
  <div id="bootstatus" style="position:fixed;left:8px;bottom:8px;background:#1f2937;color:#fff;padding:6px 10px;border-radius:6px;font:12px/1.2 ui-monospace,Menlo,Consolas,monospace;z-index:9999">
    Loading scripts…
  </div>

  <!-- 1) ImageTracer: choose ONE of these options -->

  <!-- A) Use your fork hosted on GitHub Pages -->
  <!-- Replace USER/REPO/PATH if different; keep this BEFORE app.js -->
  <script src="https://robbie-likescodes.github.io/imagetracerjs/imagetracer_v1.2.6.js" defer></script>

  <!-- B) Or load the local copy (if you placed it in /lib) -->
  <!-- <script src="./lib/imagetracer_v1.2.6.js" defer></script> -->

  <!-- 2) Optional vector helper (if you keep a local vector.js) -->
  <!-- <script src="./lib/vector.js" defer></script> -->

  <!-- 3) Your module app. IMPORTANT: type="module" and a ROOT path -->
  <script type="module">
    // Give the app a tiny config for asset paths (used by app.js)
    window.__APP_CONFIG__ = {
      pmsUrl: './assets/pms_solid_coated.json',  // PMS JSON
      tracerReady: () => typeof window.ImageTracer !== 'undefined'
    };

    // Load app.js from the repo root
    import './app.js?v=1'
      .then(() => {
        const el = document.getElementById('bootstatus');
        if (el) el.style.display = 'none';
        console.log('[app] module loaded');
      })
      .catch(err => {
        const el = document.getElementById('bootstatus');
        if (el) {
          el.textContent = 'Failed to load app.js — check path: ./app.js';
          el.style.background = '#7f1d1d';
        }
        console.error('Failed to import app.js', err);
      });
  </script>

  <!-- 4) Hard error catcher (helps surface silent module errors on iOS) -->
  <script>
    window.addEventListener('error', function(e){
      const el = document.getElementById('bootstatus');
      if (el) {
        el.textContent = 'Runtime error: ' + (e.message || e.type);
        el.style.background = '#7f1d1d';
      }
    });
  </script>
</body>
</html>
